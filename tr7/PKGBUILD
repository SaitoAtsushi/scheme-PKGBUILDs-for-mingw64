pkgbase=tr7
pkgname="${MINGW_PACKAGE_PREFIX}-${pkgbase}"
pkgver=2.0.11
pkgrel=1
pkgdesc="Tiny R7RS-small scheme interpreter"
arch=('any')
url="https://jobol.gitlab.io/tr7/"
license=('ISCL')
depends=()
makedepends=("${MINGW_PACKAGE_PREFIX}-gcc" "${MINGW_PACKAGE_PREFIX}-make")
source=("https://gitlab.com/jobol/tr7/-/archive/v2.0.11/tr7-v2.0.11.tar.gz"
        "tr7-mingw.patch")
sha256sums=('5e4b19c672286c76d1d8bf3215daf51a24539269d3e45012656395bc3de7541d'
            'SKIP')

prepare() {
  cd "${srcdir}/tr7-v${pkgver}"
  patch -p1 -i "${srcdir}/tr7-mingw.patch"
}

build() {
  cd "${srcdir}/tr7-v${pkgver}"
  make PREFIX=${MINGW_PREFIX}
}

package() {
  cd "${srcdir}/tr7-v${pkgver}"
  make install DESTDIR="${pkgdir}" PREFIX=${MINGW_PREFIX}
}
